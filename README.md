# Руководство по разработке проектов DG

## Реформа им. Коли (в народе "Врываемся в 2к22")
### Введение
Что все это такое, зачем и почему я это читаю?

Не буду долго разглагольствовать. У нас в распоряжении десяток-другой сайтов, и все они сделаны прямо скажем очень по-разному. Например, где-то мы создаем и редактируем статьи в админке, где-то в админке и файлах, где-то в файлах. И к сожалению, это касается далеко не только статей. В результате, порой даже небольшая правка, или тестирование чего-то нового превращается в весьма напряженный процесс, когда необхомо сначала понять где, что лежит, потом понять, что понял неправильно, и пропустив [40 капель валерьянки](https://www.youtube.com/watch?v=R01W7Lc99Wk) что-то получится сделать.

Короче говоря, возникла необходимости привести все к единообразию. Разумеется, все большие изменения лучше и проще начинать с чистого листа. И тут я подумал, зачем мы будем расставлять все по полочкам, если это не изменит сути? Коли все равно, по-хорошему, переделывать надо, так давайте выходить на новый уровень, чтобы изменения были полезны не только для нас и нашей деятельности, но и для посетителей сайта, и для заказчиков (*что в конечном иготе вдвойне выгодно для нас*).

1. **Преимущества для менеджеров**
* Создается единообразная административная панель для всех сайтов. Если где-то нужно заменить картинку, текст, скрыть/показать блоки при moдeрaции не нужно будет обращаться к "программисту", чтобы это появилось. Достаточно сделать пару кликов. Что сэкономит всем силы, время и нервы =)
2. **Преимущества для SEO**
* Высокие показатели загрузки сайта ([Pagespeed](https://developers.google.com/speed/pagespeed/insights/) будет выдавать реальные максималки, в зеленой зоне точно, а то и под 100 будет уходить);
* Автоматический лейзи-лоад для картинок;
* Мультиформатность картинок (сразу в нескольких форматах и разрешениях), прописанные alt;
* Сохранение доступа ко всем meta тегам и Yoast SEO;
* (Возможно) снижение количества отказов - как следствие ускорения загрузки.
3. **Преимущества для посетителей**
* По настоящему быстрые сайты;
* Удобство - переход между страницами без перезагрузки;
* Отсутствие багов пока "программист" что-то там делает
4. **Преимущества для заказчиков**
* Безопастность - новые сайты будет существенно сложнее взломать;
* Клиенты не расстраиваются лишний раз, видя, что что-то криво;
* Возможность видеть изменения, до публикации на сайте;
* **Кросс-платформенность**. Сайты станут хранилищем данных: все статьи и материалы сайта можно будет использовать в других проектах (для элиты - в мобильном приложении, на часах или где они захотят).
* Возможность без боли сменить домен (актуально, когда прикрыли РК, ребрендинг, или просто появилось такое желание)
5. **Преимущества для разработчиков**
* Освобождение времени, в силу того, что некоторые вещи будет удобнее сделать другим сотрудникам;
* Единообразие - при переключении с проекта на проект, ничего координальным образом не меняется;
* Код доступен только разработчикам (код не все могут смотреть. Вернее, смотреть могут не только лишь все. Мало кто может это делать. Всю работу с кодом - на программистов);
* Система контроля версий кода:
  * храним все изменения - можно откатить куда угодно;
  * можно спокойно работать в команде, когда одна версия не ломает то, что делается параллельно и наоборот;
  * когда меня не станет - любой программист сможет с легкостью это все подтянуть и использовать &copy; Баста.
6. **Преимущества для компании**
* Все перечисленные выше
* Централизация всех админок в одной админке (создать что-то типо admin.topdg.ru). Когда не нужно бегать с reg.ru на nic, а оттуда на beget
* Экономия на хостинге (но это пока не точно). Ибо все данные хранятся в одном месте, поэтому нужно будет оплачивать только topdg.ru, проекты можно размещать на других специальзированных ресурсах( *этот пункт нужно будет конкретно смотреть насколько он реально рабочий*)

Конечно, ничего не бывает просто так. Как говорится, за все в этой жизни нужно платить. **Какие минусы**:
1. Внесенные изменения на сайт будут доступны только через несколько минут (1-5 минут). Ну это не страшно.
2. Далеко не каждый разработчик сможет поддерживать такую систему, поэтому в случае чего придется кому-то платить хорошую котлету. Ибо это технологии другого уровня и таких разработчиков как правило разбирают с руками и ногами.

Ну тут, как говорится, каждый сам решает. Но, это совершенно точно выход на совсем другой уровень хотя бы в плане создания сайтов. Это как раз то, что использует [CSC](https://cscpharma.ru/) только немножко другое.

Вообще это введение, поэтому хватит пока. Ниже будут новые правила разработки, если это решение будет одобрено. Либо просто правила, потому что сейчас их нет. А надо бы)

============
## Разработка
============

### Среда разработки
На вкус и цвет - товарища нет, каждый выбирает для себя сам удобный редактор.

### Что необходимо иметь установленным па ПК
1. Node.js + npm - [ссылка](https://nodejs.org/en/)
2. Webpack - [ссылка](https://webpack.js.org/)
3. ReactJS - [ссылка](https://reactjs.org/)
4. Gatsby - [ссылка](https://www.gatsbyjs.com/)
5. GitHub - [ссылка](http://github.com/)
6. WP Local (опционально) - [ссылка](https://localwp.com/)


### Необходимый набор навыков
1. HTML5 / CSS3
  1. SASS (SCSS)
2. JavaScript
   1. Vanila ES6
   2. ReactJS (база)
   3. Gatsby
3. Webpack, npm (базово), Node.js (минимально)
4. GraphQL
   1. Query
   2. Mutation
5. WordPress
   1. Создание тем, работа с постами, записями и кастомными типами
   2. Плагины:
      1. ACF
      2. WPGraphQL
      3. WPGatsby
      4. YoastSEO
6. GitHub - основной набор команд, работа с ветками
   1. init
   2. add
   3. commit
   4. push
   5. branch
   6. status
   7. remote
7. PHP (опционально)


### Языки и технологии
#### 1. HTML5 / CCS3
  * _HTML_: 
    - Нейминг элементов -  [BEM-методология](https://ru.bem.info/), разработанная Яндексом. (не обязательно чистый БЭМ, но следование его принципам).
  * _CSS_: 
    - SCSS;
    - Уверенное знание CSS - когда анимации создаются благодаря CSS, а не JS;
    - Адаптивная верстка.
#### 2. JavaScript
* **Полный отказ от JQuery** в силу избыточности использования данной библиотеки. Да, она была хороша в свое время, но мир не стоит на месте, и сегодня не нуждается в ней. Перевод всех проектов на чистый JS. В условиях отказа от JQuery используются JS-библиотеки:
  * Слайдер - [swiperjs](https://swiperjs.com/)
  * Скроллер - [simplebar](https://grsmto.github.io/simplebar/)
  * Поп-ап - [fslightbox](https://fslightbox.com/) (для картинок, видео, 3D, IFrames и т.п. интерактива). Формы, текстовые элементы - кастомный поп-ап
  * Плейсхолдер для полей ввода [imask](https://imask.js.org/)
  * Графики - [Charts.js](https://www.chartjs.org/)
  * (по мере необходимости добавятся другие, требования не обязательные, можно использовать другие vanila JS аналоги)
* **JavaScript фреймвоки**. Мы, следуя в ногу со врменем, переносим все проекты на разработанный компанией Facebook (Meta) фреймворк ReactJS. Так как большенство (все) наших проектов - полустатичные (по факту - статичные) сайты, а наше основное направление - реклама и продвижение, мы используем библиотеку Gatsby. В случае создания полудинамического (динамического) сайта - переходим на NextJs.
* Преимущества ReactJS для наших клиентов:
  * Мировые стандарты разработки
  * Высокая скорость загрузки сайта
  * Максимальная возможная оптимизация
  * Переход между страницами без перезагрузки  
  * Компанентный подход - кто будет дорабатывать за нами, не будут плакать от обилия г*внокода.
* Преимущества Gatsby:
  * ReactJS - ломает SEO продвижение, GatsbyJS - спасает SEO
  * Автоматическая оптимизация изображений под современные форматы и разрешения экранов
  * Ленивая загрузка картинок

#### 3. Webpack, npm, Node.js
Уменее базово настраивать webpack для работы и устанавливать пакеты.

#### 4. GraphQL
* Установка плагинов GraphQL для WordPress
* Уменее делать стандартные запросы на извлечение и добавление данных

#### 5. WordPress
Создавать темы, добавлять плагины, страницы, кастомные типы.
*тут будет полное описание*

#### 6. GitHub
*тут будет полное описание*

#### 7. PHP
В силу перехода всего мира на JS фреймвоки, в принципе отказываемся от этого языка, ибо единственное место где его можно будет фактически использовать - админка WordPress